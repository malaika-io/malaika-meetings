script.
    var OneSignal = window.OneSignal || [];
    OneSignal.push(function () {
        OneSignal.init({
            appId: "87997d16-ab3a-478f-ace8-a640af97cfc5", autoRegister: false,
            allowLocalhostAsSecureOrigin: true,
            notifyButton: {
                enable: false,
            }
        });

        OneSignal.on('permissionPromptDisplay', function () {
            console.log("The prompt displayed");
        });

        var isPushSupported = OneSignal.isPushNotificationsSupported();
        if (isPushSupported) {
            // Push notifications are supported
        } else {
            // Push notifications are not supported
        }

        OneSignal.isPushNotificationsEnabled(function (isEnabled) {
            if (isEnabled)
                console.log("Push notifications are enabled!");
            else
                console.log("Push notifications are not enabled yet.");
        });

        OneSignal.getUserId(function (userId) {
            console.log("OneSignal User ID:", userId);
            const csrf_token = `${csrfToken}`;
            const user = !{JSON.stringify(user)};
            console.log('csrfToken', csrfToken)
            $.ajax({
                url: "/users/onesignal",
                method: "POST",
                data: {
                    id: user.id,
                    oneSignalId: userId,
                    csrf_token: csrf_token,
                },
                dataType: "json",
            }).done(function (response) {
                let data = JSON.stringify(response);
                console.log(data)
            }).fail(function (error) {
                alert("La requête s'est terminée en échec. Infos : " + JSON.stringify(error));
            })
        });

        OneSignal.on('notificationDisplay', function (event) {
            console.warn('OneSignal notification displayed:', event);
        });

    });

